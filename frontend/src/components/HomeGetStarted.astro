---
import { Image } from "astro:assets";
import frameworksImage from "../assets/ui-frameworks.png";
import JasperReports from "./JasperReports.astro";
---

<ul
  class="nav nav-tabs justify-content-center"
  id="reportviz-tabs"
  role="tablist"
>
  <li class="nav-item" role="presentation">
    <button
      class="nav-link active"
      data-bs-toggle="tab"
      data-bs-target="#get-started-tab-setup"
      type="button"
      role="tab"
      aria-controls="setup"
      aria-selected="true"
    >
      <span class="badge bg-primary">1</span> Add ReportViz Starter
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button
      class="nav-link"
      data-bs-toggle="tab"
      data-bs-target="#get-started-tab-config"
      type="button"
      role="tab"
      aria-controls="config"
      aria-selected="false"
    >
      <span class="badge bg-primary">2</span> Configure a Report repository
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button
      class="nav-link"
      data-bs-toggle="tab"
      data-bs-target="#get-started-tab-ui"
      type="button"
      role="tab"
      aria-controls="ui"
      aria-selected="false"
    >
      <span class="badge bg-primary">3</span> Build your UI
    </button>
  </li>
</ul>

<div class="tab-content mt-3 p-3">
  <div
    class="tab-pane fade show active"
    id="get-started-tab-setup"
    role="tabpanel"
    aria-labelledby="get-started-tab-setup"
  >
    <pre><code class="language-java" is:raw>
dependencies {
    implementation("com.reportviz:reportviz-spring-boot-starter-web:&lt;VERSION&gt;")
}
</code></pre>
  </div>
  <div
    class="tab-pane fade"
    id="get-started-tab-config"
    role="tabpanel"
    aria-labelledby="get-started-tab-config"
  >
    <p>
      ReportViz works with <strong
        >precompiled JasperReport (.jasper) objects</strong
      >. The easiest way to get started is to organize your reports in a directory structure.
    </p>
    <p>
      <strong>Step 1:</strong> Place your compiled <code>.jasper</code> files in a directory (e.g., <code>/reports</code>) — similar to how you organize reports in JasperSoft Studio's workspace.
    </p>
    <p>
      <strong>Step 2:</strong> Configure a file system repository to point ReportViz to that directory:
    </p>
    <pre><code class="language-java" is:raw>
public class ReportViewerConfig {
  @Value("${reportviz.reports-dir}")
  private String reportsDir;

  /**
    Factory bean for a FileRepositoryService that uses the per-request JaspeReportsContext created by ReportViz.
	*/
  @Bean
  public JasperExtensionFactory<FileRepositoryService> fileRepositoryService() {
    return jasperReportsContext -> new FileRepositoryService(jasperReportsContext, reportsDir, false);
  }

  /**
    Factory bean for a FileRepositoryPersistenceServiceFactory
	*/
  @Bean
  public JasperExtensionFactory<FileRepositoryPersistenceServiceFactory> repositoryService() {
    return jasperReportsContext -> FileRepositoryPersistenceServiceFactory.getInstance();
  }
}
</code></pre>
  </div>
  <div
    class="tab-pane fade"
    id="get-started-tab-ui"
    role="tabpanel"
    aria-labelledby="get-started-tab-ui"
  >
    <div class="row row-cols-1 row-cols-md-2">
      <div class="col">
        <Image
          src={frameworksImage}
          alt="Frontend Frameworks"
          style="max-width: 100%; height: auto;"
        />
      </div>
      <div class="col">
        <p>
          Use ReportViz’s REST API to build a fully custom report viewer with
          your preferred frontend framework.
        </p>
        <p>
          ReportViz exposes the necessary metadata needed to generate dynamic
          parameter forms and report viewer components.
        </p>
        <p>
          ReportViz also provides the REST APIs execute and cache report
          outputs, and render reports in multiple formats (HTML, PDF, Excel, and
          more) — either instantly or from cached executions.
        </p>
      </div>
    </div>
  </div>
</div>
